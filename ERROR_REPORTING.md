# 本番環境エラー報告ガイド

本番環境で発生したエラーをCursorに伝えるための方法をまとめています。

## エラー情報の共有方法

### 方法1: エラーメッセージを直接貼り付け（最も簡単）

チャットで以下の情報を共有してください：
- エラーメッセージ全文
- エラーが発生したタイミング（どの操作を行った時か）
- エラー画面のスクリーンショット（あれば）

例：
```
本番環境でログイン時にエラーが発生しました。
エラーメッセージ: "Connection refused: connect"
発生タイミング: ログインボタンをクリックした直後
```

### 方法2: ログファイルを共有

本番環境のログファイルをローカルにコピーして、Cursorで読み込んでください：

1. **ログファイルの場所を確認**
   - Spring Bootのデフォルト: コンソール出力または `logs/` ディレクトリ
   - 本番サーバーでのログファイルパスを確認

2. **ログファイルをコピー**
   ```powershell
   # 例: サーバーからローカルにログをコピー
   # SCPやFTPなどでログファイルをダウンロード
   ```

3. **Cursorで読み込む**
   - ファイルをプロジェクトフォルダに保存
   - Cursorのチャットで「このファイルを見て」と伝える
   - または、ファイルパスを指定して読み込む

### 方法3: エラーログをファイルに保存

本番環境で実行中にエラーが発生した場合：

```powershell
# Javaアプリケーションのログをファイルにリダイレクト
java -jar kabuweb.jar --spring.profiles.active=prod 2>&1 | Tee-Object -FilePath "production-error.log"
```

その後、`production-error.log` ファイルをCursorで読み込んでください。

### 方法4: ブラウザのコンソールエラー

フロントエンドのエラーの場合：

1. ブラウザの開発者ツールを開く（F12）
2. Consoleタブでエラーを確認
3. エラーメッセージをコピーしてチャットに貼り付け
4. Networkタブで失敗したリクエストの詳細も共有

## 本番環境のログ設定

`application-prod.properties` にログファイルの設定を追加することで、
ログをファイルに自動保存できます：

```properties
# ログファイルの出力先
logging.file.name=logs/kabuweb-prod.log
logging.file.max-size=10MB
logging.file.max-history=30

# エラーレベルのログを別ファイルに保存
logging.level.root=INFO
logging.level.com.kabu.kabuweb=DEBUG
```

## エラー報告時に含めるべき情報

エラーを報告する際は、以下の情報を含めてください：

- ✅ **エラーメッセージ全文**
- ✅ **エラースタックトレース**（あれば）
- ✅ **発生タイミング**（どの操作を行った時か）
- ✅ **再現手順**（可能であれば）
- ✅ **環境情報**
  - ブラウザの種類とバージョン
  - OS情報
  - 本番環境のURL
- ✅ **リクエスト情報**（APIエラーの場合）
  - HTTPメソッド（GET/POST等）
  - エンドポイント
  - リクエストボディ（機密情報を除く）

## 緊急時の対応

本番環境で重大なエラーが発生した場合：

1. **即座に共有**: エラーメッセージをすぐにチャットに貼り付け
2. **ログを確認**: 可能であればサーバーログを確認
3. **一時的な回避策**: エラーが発生する機能を一時的に無効化（必要に応じて）

---

**注意**: ログファイルには機密情報（パスワード、トークン等）が含まれる可能性があります。
共有前に機密情報をマスクするか、削除してください。
